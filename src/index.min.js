(()=>{"use strict";window.embedPoll=function(t,e){const n=document.querySelector(t);n&&(null==e?void 0:e.reduce(((t,e)=>(t.some((t=>t.pollId===e.pollId))||t.push(e),t)),[])).forEach((({pollId:t,pollQuestion:e,pollOptions:l})=>{n.appendChild(function(t,e,n){const l=document.createElement("div");l.setAttribute("id",`#${t}`),l.classList.add("main-container");const d=JSON.parse(localStorage.getItem(t)||"[]"),o=d?d.length===n.length?d:function(t,e,n){let l=[];for(let e=0;e<n;e++)e<(null==t?void 0:t.length)?l.push(t[e]):l.push(0);return localStorage.setItem(e,JSON.stringify(l)),l}(d,t,n.length):Array(n.length).fill(0);let s=[];function i(e,n){"add"===n?(o[e]++,s=[...s,{pollId:t,index:e}]):(o[e]--,s=s.filter((e=>e.pollId!==t))),localStorage.setItem(t,JSON.stringify(o)),c()}function c(){l.innerHTML="";const d=document.createElement("h2");d.textContent=e,l.appendChild(d);const c=o.reduce(((t,e)=>t+e),0),a=null==s?void 0:s.find((e=>e.pollId===t));if(a){const e=document.createElement("div");e.setAttribute("id",`${t}_results`),e.classList.add("mt-2"),n.forEach(((n,l)=>{const d=c?o[l]/c*100:0,s=document.createElement("div");s.classList.add("result-bar"),s.setAttribute("id",`${t}_result_bar_${l}`);const i=document.createElement("div");i.setAttribute("id",`${t}_progress_bar_${l}`),i.style.width=`${d}%`,i.classList.add("progress-bar");const r=document.createElement("span");r.textContent=`${n}: ${o[l]} (${d.toFixed(1)}%) ${(null==a?void 0:a.index)===l?"âœ…":""}`,r.classList.add("result-text"),s.appendChild(i),s.appendChild(r),e.appendChild(s)})),l.appendChild(e)}else n.forEach(((t,e)=>{const n=document.createElement("button");n.textContent=t,n.classList.add("option-button"),n.onclick=()=>i(e,"add"),l.appendChild(n)}));const r=document.createElement("div");if(r.classList.add("flex","justify-between","mt-2"),c>0){const t=document.createElement("span");t.textContent=`${c} ${c>1?"votes":"vote"}`,t.classList.add("total-vote"),t.style.color="#a8a8a8",r.appendChild(t)}if(a){const t=document.createElement("button");t.textContent="Undo",t.classList.add("undo-btn"),t.onclick=()=>i(a.index,"remove"),r.appendChild(t)}l.appendChild(r)}return c(),l}(t,e,l))}))}})();